-- Auto-execute main script on UI run
loadstring(game:HttpGet("https://rawscripts.net/raw/NEW!-Hypershot-(Gunfight)-No-Ability-Cooldown-Open-Sourced-47339"))()

-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local mouse = player:GetMouse()

-- Create ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "iSightsHypershotUtility"
ScreenGui.Parent = game.CoreGui
ScreenGui.ResetOnSpawn = false

-- Draggable Icon (for minimize)
local Icon = Instance.new("TextButton")
Icon.Name = "MiniIcon"
Icon.Text = "ðŸ“±"
Icon.Size = UDim2.new(0, 40, 0, 40)
Icon.Position = UDim2.new(0, 10, 0, 10)
Icon.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Icon.TextColor3 = Color3.fromRGB(255, 255, 255)
Icon.BackgroundTransparency = 0.3
Icon.Visible = false
Icon.Parent = ScreenGui

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 400, 0, 300)
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
MainFrame.BackgroundTransparency = 0.2
MainFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.Parent = ScreenGui

-- UICorner
local UICorner = Instance.new("UICorner", MainFrame)

-- Title
local Title = Instance.new("TextLabel")
Title.Text = "iSights Hypershot Utility"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.Size = UDim2.new(1, -40, 0, 30)
Title.Position = UDim2.new(0, 10, 0, 5)
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = MainFrame

-- Minimize Button
local Minimize = Instance.new("TextButton")
Minimize.Text = "-"
Minimize.Font = Enum.Font.GothamBold
Minimize.TextSize = 18
Minimize.Size = UDim2.new(0, 30, 0, 30)
Minimize.Position = UDim2.new(1, -35, 0, 5)
Minimize.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Minimize.TextColor3 = Color3.fromRGB(255, 255, 255)
Minimize.Parent = MainFrame

-- Tabs
local Tabs = Instance.new("Frame")
Tabs.Size = UDim2.new(0, 100, 1, -40)
Tabs.Position = UDim2.new(0, 0, 0, 40)
Tabs.BackgroundTransparency = 1
Tabs.Parent = MainFrame

local Content = Instance.new("Frame")
Content.Size = UDim2.new(1, -100, 1, -40)
Content.Position = UDim2.new(0, 100, 0, 40)
Content.BackgroundTransparency = 1
Content.Parent = MainFrame

-- Tab Buttons
local function createTabButton(name)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 0, 40)
    button.Text = name
    button.Font = Enum.Font.Gotham
    button.TextSize = 14
    button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.AutoButtonColor = false
    button.Parent = Tabs

    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    end)
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    end)

    return button
end

-- Pages
local Pages = {}

-- Main Tab
Pages.Main = Instance.new("Frame")
Pages.Main.Size = UDim2.new(1, 0, 1, 0)
Pages.Main.BackgroundTransparency = 1
Pages.Main.Visible = true
Pages.Main.Parent = Content

local autoFarmToggle = false
local AutoFarmButton = Instance.new("TextButton")
AutoFarmButton.Text = "Auto Farm: OFF"
AutoFarmButton.Size = UDim2.new(0, 200, 0, 40)
AutoFarmButton.Position = UDim2.new(0, 20, 0, 20)
AutoFarmButton.Font = Enum.Font.Gotham
AutoFarmButton.TextSize = 14
AutoFarmButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
AutoFarmButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoFarmButton.Parent = Pages.Main

AutoFarmButton.MouseButton1Click:Connect(function()
    autoFarmToggle = not autoFarmToggle
    if autoFarmToggle then
        AutoFarmButton.Text = "Auto Farm: ON"
        loadstring(game:HttpGet("https://rawscripts.net/raw/NEW!-Hypershot-(Gunfight)-Bring-All-Players-And-Bots-Open-Source-47412"))()
    else
        AutoFarmButton.Text = "Auto Farm: OFF"
        -- Optional: You can add logic to pause/stop script here
    end
end)

-- Info Tab
Pages.Info = Instance.new("Frame")
Pages.Info.Size = UDim2.new(1, 0, 1, 0)
Pages.Info.BackgroundTransparency = 1
Pages.Info.Visible = false
Pages.Info.Parent = Content

local InfoLabel = Instance.new("TextLabel")
InfoLabel.Size = UDim2.new(1, -20, 1, -20)
InfoLabel.Position = UDim2.new(0, 10, 0, 10)
InfoLabel.BackgroundTransparency = 1
InfoLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoLabel.Font = Enum.Font.Gotham
InfoLabel.TextWrapped = true
InfoLabel.TextXAlignment = Enum.TextXAlignment.Left
InfoLabel.TextYAlignment = Enum.TextYAlignment.Top
InfoLabel.TextSize = 14
InfoLabel.Text = [[
Made by iSight, ZYX & Imran

Usage:
- Use the "Auto Farm" button on the Main tab.
- Make sure you have the "Auto Reload" ability on your first slot.
- Auto script loads when you open the UI.
]]
InfoLabel.Parent = Pages.Info

-- Create and switch tabs
local buttons = {
    Main = createTabButton("Main"),
    Info = createTabButton("Info")
}

local tabList = {"Main", "Info"}

for i, tabName in ipairs(tabList) do
    buttons[tabName].Position = UDim2.new(0, 0, 0, (i - 1) * 40)
    buttons[tabName].MouseButton1Click:Connect(function()
        for name, page in pairs(Pages) do
            page.Visible = (name == tabName)
        end
    end)
end

-- Hide / Show Logic
Minimize.MouseButton1Click:Connect(function()
    MainFrame.Visible = false
    Icon.Visible = true
end)

Icon.MouseButton1Click:Connect(function()
    MainFrame.Visible = true
    Icon.Visible = false
end)

-- Draggable Mini Icon
local dragging = false
local dragInput, dragStart, startPos

Icon.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = Icon.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

Icon.InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - dragStart
        Icon.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X,
                                  startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)
